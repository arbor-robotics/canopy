import{d as ae}from"../chunks/index.R8ovVqwX.js";import{s as oe,e as C,a as D,t as q,c as V,b as Y,g as N,d as H,f as _,l as T,i as M,h as $,j as fe,S as ce,n as F,m as ue,o as de,A as me,w as pe,k as he,x as ge}from"../chunks/scheduler.uEqbC5MF.js";import{S as se,i as ie,f as _e,c as z,b as R,m as P,a as c,t as g,d as B,e as U,g as A}from"../chunks/index.D481_ulM.js";import{w as be}from"../chunks/index.BHzjYNly.js";import{h as $e}from"../chunks/stores.C08amD8b.js";import"../chunks/create.DTY_lc0V.js";import{I as L}from"../chunks/Icon.DWudeKzt.js";import{F as ke,a as J}from"../chunks/forest_generator.BatbPF_F.js";import"../chunks/paths.CzFToEnb.js";import{O as Se}from"../chunks/OsmMap.BZEf7KfQ.js";import{f as ve}from"../chunks/index.MzPxkiHN.js";const we=ae,Ie=!0,Ye=Object.freeze(Object.defineProperty({__proto__:null,csr:we,prerender:Ie},Symbol.toStringTag,{value:"Module"}));function Q(a){let e,r;return{c(){e=C("img"),this.h()},l(t){e=V(t,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){me(e.src,r="res/druid-thick.svg")||T(e,"src",r),T(e,"alt",""),T(e,"class","h-24")},m(t,n){M(t,e,n)},d(t){t&&_(e)}}}function ye(a){let e,r,t,n,o,s=a[1]=="Druid"&&Q();return{c(){e=C("div"),s&&s.c(),r=D(),t=C("div"),n=q(a[0]),this.h()},l(d){e=V(d,"DIV",{class:!0});var l=Y(e);s&&s.l(l),r=N(l),t=V(l,"DIV",{class:!0});var f=Y(t);n=H(f,a[0]),f.forEach(_),l.forEach(_),this.h()},h(){T(t,"class","border-4 rounded-3xl p-4 ml-4 text-lg border-neutral-600 speech-bubble font-medium svelte-1ks23mx"),T(e,"class","flex flex-row my-4")},m(d,l){M(d,e,l),s&&s.m(e,null),$(e,r),$(e,t),$(t,n)},p(d,[l]){d[1]=="Druid"?s||(s=Q(),s.c(),s.m(e,r)):s&&(s.d(1),s=null),l&1&&fe(n,d[0])},i(d){d&&(o||ce(()=>{o=_e(e,ve,{duration:500}),o.start()}))},o:F,d(d){d&&_(e),s&&s.d()}}}function Ee(a,e,r){let{text:t="Hello, world"}=e,{character:n="Druid"}=e;const o=ue();let s;de(()=>{s=window.speechSynthesis;let l=s.getVoices();console.log(l),d()});function d(){if(s.speaking){console.error("speechSynthesis.speaking");return}if(t!==""){const l=new SpeechSynthesisUtterance(t);l.onend=function(f){console.log("SpeechSynthesisUtterance.onend"),o("doneSpeaking")},l.onerror=function(f){console.error(f)},s.getVoices().forEach(f=>{console.log(f.name),f.name.includes("David")&&(l.voice=f)}),l.pitch=0,s.speak(l)}}return a.$$set=l=>{"text"in l&&r(0,t=l.text),"character"in l&&r(1,n=l.character)},[t,n]}class G extends se{constructor(e){super(),ie(this,e,Ee,ye,oe,{text:0,character:1})}}function W(a){let e,r;return e=new G({props:{text:" I can guide you through the forest planning process, and then I can send the final plan to Steward, who does the planting. I'm the brain, Steward is the muscle."}}),e.$on("doneSpeaking",a[3]),{c(){z(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,n){P(e,t,n),r=!0},p:F,i(t){r||(c(e.$$.fragment,t),r=!0)},o(t){g(e.$$.fragment,t),r=!1},d(t){U(e,t)}}}function X(a){let e,r;return e=new G({props:{text:"Say hello, Steward."}}),e.$on("doneSpeaking",a[4]),{c(){z(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,n){P(e,t,n),r=!0},p:F,i(t){r||(c(e.$$.fragment,t),r=!0)},o(t){g(e.$$.fragment,t),r=!1},d(t){U(e,t)}}}function Z(a){let e,r,t,n="Plan a forest",o,s,d;return s=new G({props:{text:"Let's plan a forest together. It's easy. First, use your finger to paint where you'd like your trees to go on the map."}}),s.$on("doneSpeaking",a[5]),{c(){e=C("hr"),r=D(),t=C("p"),t.textContent=n,o=D(),z(s.$$.fragment),this.h()},l(l){e=V(l,"HR",{class:!0}),r=N(l),t=V(l,"P",{class:!0,"data-svelte-h":!0}),ge(t)!=="svelte-lmhadb"&&(t.textContent=n),o=N(l),R(s.$$.fragment,l),this.h()},h(){T(e,"class","bg-neutral-500 opacity-20 h-1"),T(t,"class","text-4xl my-4 mx-auto text-center font-serif")},m(l,f){M(l,e,f),M(l,r,f),M(l,t,f),M(l,o,f),P(s,l,f),d=!0},p:F,i(l){d||(c(s.$$.fragment,l),d=!0)},o(l){g(s.$$.fragment,l),d=!1},d(l){l&&(_(e),_(r),_(t),_(o)),U(s,l)}}}function ee(a){let e,r,t;return r=new Se({}),{c(){e=C("div"),z(r.$$.fragment),this.h()},l(n){e=V(n,"DIV",{class:!0});var o=Y(e);R(r.$$.fragment,o),o.forEach(_),this.h()},h(){T(e,"class","rounded-2xl h-[36rem]")},m(n,o){M(n,e,o),P(r,e,null),t=!0},i(n){t||(c(r.$$.fragment,n),t=!0)},o(n){g(r.$$.fragment,n),t=!1},d(n){n&&_(e),U(r)}}}function te(a){let e,r,t,n,o,s,d,l,f,O,m;return e=new G({props:{text:"You're a real Picasso. Are there any rivers or creeks near the planting area?"}}),e.$on("doneSpeaking",a[6]),o=new L({props:{id:"check",color:"#5b916f",size:"1.5rem"}}),f=new L({props:{id:"close",color:"rgb(185 28 28)",size:"1.5rem"}}),{c(){z(e.$$.fragment),r=D(),t=C("div"),n=C("button"),z(o.$$.fragment),s=q(`
					Yes`),d=D(),l=C("button"),z(f.$$.fragment),O=q(`
					No`),this.h()},l(i){R(e.$$.fragment,i),r=N(i),t=V(i,"DIV",{class:!0});var b=Y(t);n=V(b,"BUTTON",{class:!0});var j=Y(n);R(o.$$.fragment,j),s=H(j,`
					Yes`),j.forEach(_),d=N(b),l=V(b,"BUTTON",{class:!0});var h=Y(l);R(f.$$.fragment,h),O=H(h,`
					No`),h.forEach(_),b.forEach(_),this.h()},h(){T(n,"class","text-lg border-4 rounded-3xl hover:border-spring-400 transition-all p-2 border-dashed font-medium flex flex-row items-center justify-center text-spring-400"),T(l,"class","text-lg border-4 rounded-3xl hover:border-red-700 transition-all p-2 border-dashed font-medium flex flex-row items-center justify-center text-red-700"),T(t,"class","flex flex-row justify-end gap-4")},m(i,b){P(e,i,b),M(i,r,b),M(i,t,b),$(t,n),P(o,n,null),$(n,s),$(t,d),$(t,l),P(f,l,null),$(l,O),m=!0},p:F,i(i){m||(c(e.$$.fragment,i),c(o.$$.fragment,i),c(f.$$.fragment,i),m=!0)},o(i){g(e.$$.fragment,i),g(o.$$.fragment,i),g(f.$$.fragment,i),m=!1},d(i){i&&(_(r),_(t)),U(e,i),U(o),U(f)}}}function ne(a){let e,r,t,n,o,s,d,l,f,O,m;return e=new G({props:{text:"Are we planting on a hillside or other slope?"}}),e.$on("doneSpeaking",a[7]),o=new L({props:{id:"check",color:"#5b916f",size:"1.5rem"}}),f=new L({props:{id:"close",color:"rgb(185 28 28)",size:"1.5rem"}}),{c(){z(e.$$.fragment),r=D(),t=C("div"),n=C("button"),z(o.$$.fragment),s=q(`
					Yes`),d=D(),l=C("button"),z(f.$$.fragment),O=q(`
					No`),this.h()},l(i){R(e.$$.fragment,i),r=N(i),t=V(i,"DIV",{class:!0});var b=Y(t);n=V(b,"BUTTON",{class:!0});var j=Y(n);R(o.$$.fragment,j),s=H(j,`
					Yes`),j.forEach(_),d=N(b),l=V(b,"BUTTON",{class:!0});var h=Y(l);R(f.$$.fragment,h),O=H(h,`
					No`),h.forEach(_),b.forEach(_),this.h()},h(){T(n,"class","text-lg border-4 rounded-3xl hover:border-spring-400 transition-all p-2 border-dashed font-medium flex flex-row items-center justify-center text-spring-400"),T(l,"class","text-lg border-4 rounded-3xl hover:border-red-700 transition-all p-2 border-dashed font-medium flex flex-row items-center justify-center text-red-700"),T(t,"class","flex flex-row justify-end gap-4")},m(i,b){P(e,i,b),M(i,r,b),M(i,t,b),$(t,n),P(o,n,null),$(n,s),$(t,d),$(t,l),P(f,l,null),$(l,O),m=!0},p:F,i(i){m||(c(e.$$.fragment,i),c(o.$$.fragment,i),c(f.$$.fragment,i),m=!0)},o(i){g(e.$$.fragment,i),g(o.$$.fragment,i),g(f.$$.fragment,i),m=!1},d(i){i&&(_(r),_(t)),U(e,i),U(o),U(f)}}}function re(a){let e,r;return e=new G({props:{text:"Very good. Based on your responses, I believe the following tree species will work well. Tap the ones that you'd like to include in the plan."}}),e.$on("doneSpeaking",a[8]),{c(){z(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,n){P(e,t,n),r=!0},p:F,i(t){r||(c(e.$$.fragment,t),r=!0)},o(t){g(e.$$.fragment,t),r=!1},d(t){U(e,t)}}}function le(a){let e,r;return e=new G({props:{text:"Now let me calculate the best placement of each seedling... Done. Shall we send this over to Steward?"}}),e.$on("doneSpeaking",a[9]),{c(){z(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,n){P(e,t,n),r=!0},p:F,i(t){r||(c(e.$$.fragment,t),r=!0)},o(t){g(e.$$.fragment,t),r=!1},d(t){U(e,t)}}}function xe(a){let e,r,t,n,o,s,d,l,f,O,m,i,b,j;o=new G({props:{text:"I'm Druid, a forest planning wizard that runs in your browser. That big yellow robot is Steward. Steward and I are partners in robotic reforestation."}}),o.$on("doneSpeaking",a[2]);let h=a[0]>=2&&W(a),S=a[0]>=3&&X(a),v=a[0]>=4&&Z(a),y=a[0]>=5&&ee(),w=a[0]>=6&&te(a),p=a[0]>=7&&ne(a),k=a[0]>=8&&re(a),E=a[0]>=9&&le(a);return{c(){e=C("meta"),r=D(),t=C("div"),n=C("div"),z(o.$$.fragment),s=D(),h&&h.c(),d=D(),S&&S.c(),l=D(),v&&v.c(),f=D(),y&&y.c(),O=D(),w&&w.c(),m=D(),p&&p.c(),i=D(),k&&k.c(),b=D(),E&&E.c(),this.h()},l(u){const I=pe("svelte-1fo5sqm",document.head);e=V(I,"META",{name:!0,content:!0}),I.forEach(_),r=N(u),t=V(u,"DIV",{class:!0});var K=Y(t);n=V(K,"DIV",{class:!0});var x=Y(n);R(o.$$.fragment,x),s=N(x),h&&h.l(x),d=N(x),S&&S.l(x),l=N(x),v&&v.l(x),f=N(x),y&&y.l(x),O=N(x),w&&w.l(x),m=N(x),p&&p.l(x),i=N(x),k&&k.l(x),b=N(x),E&&E.l(x),x.forEach(_),K.forEach(_),this.h()},h(){document.title="Steward | Canopy",T(e,"name","description"),T(e,"content","Control and observe the robot"),T(n,"class","size-full max-w-[40rem] mx-auto"),T(t,"class","size-full overflow-y-auto")},m(u,I){$(document.head,e),M(u,r,I),M(u,t,I),$(t,n),P(o,n,null),$(n,s),h&&h.m(n,null),$(n,d),S&&S.m(n,null),$(n,l),v&&v.m(n,null),$(n,f),y&&y.m(n,null),$(n,O),w&&w.m(n,null),$(n,m),p&&p.m(n,null),$(n,i),k&&k.m(n,null),$(n,b),E&&E.m(n,null),j=!0},p(u,I){u[0]>=2?h?(h.p(u,I),I[0]&1&&c(h,1)):(h=W(u),h.c(),c(h,1),h.m(n,d)):h&&(A(),g(h,1,1,()=>{h=null}),B()),u[0]>=3?S?(S.p(u,I),I[0]&1&&c(S,1)):(S=X(u),S.c(),c(S,1),S.m(n,l)):S&&(A(),g(S,1,1,()=>{S=null}),B()),u[0]>=4?v?(v.p(u,I),I[0]&1&&c(v,1)):(v=Z(u),v.c(),c(v,1),v.m(n,f)):v&&(A(),g(v,1,1,()=>{v=null}),B()),u[0]>=5?y?I[0]&1&&c(y,1):(y=ee(),y.c(),c(y,1),y.m(n,O)):y&&(A(),g(y,1,1,()=>{y=null}),B()),u[0]>=6?w?(w.p(u,I),I[0]&1&&c(w,1)):(w=te(u),w.c(),c(w,1),w.m(n,m)):w&&(A(),g(w,1,1,()=>{w=null}),B()),u[0]>=7?p?(p.p(u,I),I[0]&1&&c(p,1)):(p=ne(u),p.c(),c(p,1),p.m(n,i)):p&&(A(),g(p,1,1,()=>{p=null}),B()),u[0]>=8?k?(k.p(u,I),I[0]&1&&c(k,1)):(k=re(u),k.c(),c(k,1),k.m(n,b)):k&&(A(),g(k,1,1,()=>{k=null}),B()),u[0]>=9?E?(E.p(u,I),I[0]&1&&c(E,1)):(E=le(u),E.c(),c(E,1),E.m(n,null)):E&&(A(),g(E,1,1,()=>{E=null}),B())},i(u){j||(c(o.$$.fragment,u),c(h),c(S),c(v),c(y),c(w),c(p),c(k),c(E),j=!0)},o(u){g(o.$$.fragment,u),g(h),g(S),g(v),g(y),g(w),g(p),g(k),g(E),j=!1},d(u){u&&(_(r),_(t)),_(e),U(o),h&&h.d(),S&&S.d(),v&&v.d(),y&&y.d(),w&&w.d(),p&&p.d(),k&&k.d(),E&&E.d()}}}function Te(a,e,r){let t;function n(){console.log(o.locations),f.clearSeedlingMarkers();for(let[p,k]of o.locations)f.addSeedlingMarker(p,k);l(),d()}let o=new ke(n),s=o.getSpeciesOptions();o.getIncludedSpeciesCount(),o.getIncludedSpeciesCount(J.OVERSTORY),o.getIncludedSpeciesCount(J.UNDERSTORY),o.getIncludedSpeciesCount(J.EMERGENT);function d(){let p=o.toRos();$e.set(p)}function l(){let p=o.toString();localStorage.setItem("plan",JSON.stringify(p)),console.log(`Autosaved: ${p.slice(0,100)}...`)}let f,O=be([]);he(a,O,p=>r(16,t=p)),s.forEach(p=>{t.push(p.included),p.included});let m=8;return[m,O,()=>{r(0,m++,m)},()=>{r(0,m++,m)},()=>{r(0,m++,m)},()=>{r(0,m++,m)},()=>{r(0,m++,m)},()=>{r(0,m++,m)},()=>{r(0,m++,m)},()=>{r(0,m++,m)}]}class Be extends se{constructor(e){super(),ie(this,e,Te,xe,oe,{},null,[-1,-1])}}export{Be as component,Ye as universal};
